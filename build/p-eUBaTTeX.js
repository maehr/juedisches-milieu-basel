import{d as n}from"./p-ZjP4CjeZ.js";import{OVERLAY_BACK_BUTTON_PRIORITY as e,shouldUseCloseWatcher as t}from"./p-DPtJldu4.js";import{g as o,c as i}from"./p-CyLexh8P.js";import{C as s}from"./p-B35rEaJ1.js";import{a as r,c as d,b as a,d as c,g as l}from"./p-BGUp-1Wb.js";import{a as u}from"./p-nezZJyxV.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let f=0;let p=0;const m=new WeakMap;const v=n=>({create(e){return O(n,e)},dismiss(e,t,o){return D(document,e,t,n,o)},async getTop(){return N(document,n)}});const h=v("ion-alert");const b=v("ion-action-sheet");const y=v("ion-popover");const w=n=>{if(typeof document!=="undefined"){P(document)}const e=f++;n.overlayIndex=e};const g=n=>{if(!n.hasAttribute("id")){n.id=`ion-overlay-${++p}`}return n.id};const O=(n,e)=>{if(typeof window!=="undefined"&&typeof window.customElements!=="undefined"){return window.customElements.whenDefined(n).then((()=>{const t=document.createElement(n);t.classList.add("overlay-hidden");Object.assign(t,Object.assign(Object.assign({},e),{hasController:true}));L(document).appendChild(t);return new Promise((n=>d(t,n)))}))}return Promise.resolve()};const k='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])';const x=n=>n.classList.contains("overlay-hidden");const T=(n,e)=>{const t=n.querySelector(k);A(t,e)};const j=(n,e)=>{const t=Array.from(n.querySelectorAll(k));const o=t.length>0?t[t.length-1]:null;A(o,e)};const A=(n,e)=>{let t=n;const o=n===null||n===void 0?void 0:n.shadowRoot;if(o){t=o.querySelector(k)||n}if(t){a(t)}else{e.focus()}};const C=(n,e)=>{const t=N(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover");const o=n.target;if(!t||!o){return}if(t.classList.contains("ion-disable-focus-trap")){return}const i=()=>{if(t===o){t.lastFocus=undefined}else if(o.tagName==="ION-TOAST"){A(t.lastFocus,t)}else{const n=l(t);if(!n.contains(o)){return}const i=n.querySelector(".ion-overlay-wrapper");if(!i){return}if(i.contains(o)||o===n.querySelector("ion-backdrop")){t.lastFocus=o}else{const n=t.lastFocus;T(i,t);if(n===e.activeElement){j(i,t)}t.lastFocus=e.activeElement}}};const s=()=>{if(t.contains(o)){t.lastFocus=o}else if(o.tagName==="ION-TOAST"){A(t.lastFocus,t)}else{const n=t.lastFocus;T(t,t);if(n===e.activeElement){j(t,t)}t.lastFocus=e.activeElement}};if(t.shadowRoot){s()}else{i()}};const P=n=>{if(f===0){f=1;n.addEventListener("focus",(e=>{C(e,n)}),true);n.addEventListener("ionBackButton",(t=>{const o=N(n);if(o===null||o===void 0?void 0:o.backdropDismiss){t.detail.register(e,(()=>{o.dismiss(undefined,F)}))}}));if(!t()){n.addEventListener("keydown",(e=>{if(e.key==="Escape"){const e=N(n);if(e===null||e===void 0?void 0:e.backdropDismiss){e.dismiss(undefined,F)}}}))}}};const D=(n,e,t,o,i)=>{const s=N(n,o,i);if(!s){return Promise.reject("overlay does not exist")}return s.dismiss(e,t)};const I=(n,e)=>{if(e===undefined){e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"}return Array.from(n.querySelectorAll(e)).filter((n=>n.overlayIndex>0))};const B=(n,e)=>I(n,e).filter((n=>!x(n)));const N=(n,e,t)=>{const o=B(n,e);return t===undefined?o[o.length-1]:o.find((n=>n.id===t))};const S=(n=false)=>{const e=L(document);const t=e.querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");if(!t){return}if(n){t.setAttribute("aria-hidden","true")}else{t.removeAttribute("aria-hidden")}};const E=async(n,e,t,s,r)=>{var d,a;if(n.presented){return}S(true);K(n.el);n.presented=true;n.willPresent.emit();(d=n.willPresentShorthand)===null||d===void 0?void 0:d.emit();const c=o(n);const l=n.enterAnimation?n.enterAnimation:i.get(e,c==="ios"?t:s);const u=await M(n,l,n.el,r);if(u){n.didPresent.emit();(a=n.didPresentShorthand)===null||a===void 0?void 0:a.emit()}if(n.el.tagName!=="ION-TOAST"){G(n.el)}if(n.keyboardClose&&(document.activeElement===null||!n.el.contains(document.activeElement))){n.el.focus()}n.el.removeAttribute("aria-hidden")};const G=async n=>{let e=document.activeElement;if(!e){return}const t=e===null||e===void 0?void 0:e.shadowRoot;if(t){e=t.querySelector(k)||e}await n.onDidDismiss();if(document.activeElement===null||document.activeElement===document.body){e.focus()}};const J=async(e,t,s,r,d,a,c)=>{var l,u;if(!e.presented){return false}if(n!==undefined&&B(n).length===1){S(false)}e.presented=false;try{e.el.style.setProperty("pointer-events","none");e.willDismiss.emit({data:t,role:s});(l=e.willDismissShorthand)===null||l===void 0?void 0:l.emit({data:t,role:s});const n=o(e);const f=e.leaveAnimation?e.leaveAnimation:i.get(r,n==="ios"?d:a);if(s!==U){await M(e,f,e.el,c)}e.didDismiss.emit({data:t,role:s});(u=e.didDismissShorthand)===null||u===void 0?void 0:u.emit({data:t,role:s});const p=m.get(e)||[];p.forEach((n=>n.destroy()));m.delete(e);e.el.classList.add("overlay-hidden");e.el.style.removeProperty("pointer-events");if(e.el.lastFocus!==undefined){e.el.lastFocus=undefined}}catch(n){console.error(n)}e.el.remove();Q();return true};const L=n=>n.querySelector("ion-app")||n.body;const M=async(n,e,t,o)=>{t.classList.remove("overlay-hidden");const s=n.el;const r=e(s,o);if(!n.animated||!i.getBoolean("animated",true)){r.duration(0)}if(n.keyboardClose){r.beforeAddWrite((()=>{const n=t.ownerDocument.activeElement;if(n===null||n===void 0?void 0:n.matches("input,ion-input, ion-textarea")){n.blur()}}))}const d=m.get(n)||[];m.set(n,[...d,r]);await r.play();return true};const V=(n,e)=>{let t;const o=new Promise((n=>t=n));Z(n,e,(n=>{t(n.detail)}));return o};const Z=(n,e,t)=>{const o=i=>{c(n,e,o);t(i)};r(n,e,o)};const z=n=>n==="cancel"||n===F;const W=n=>n();const $=(n,e)=>{if(typeof n==="function"){const t=i.get("_zoneGate",W);return t((()=>{try{return n(e)}catch(n){throw n}}))}return undefined};const F="backdrop";const U="gesture";const _=39;const q=n=>{let e=false;let t;const o=s();const i=(i=false)=>{if(t&&!i){return{delegate:t,inline:e}}const{el:s,hasController:r,delegate:d}=n;const a=s.parentNode;e=a!==null&&!r;t=e?d||o:d;return{inline:e,delegate:t}};const r=async e=>{const{delegate:t}=i(true);if(t){return await t.attachViewToDom(n.el,e)}const{hasController:o}=n;if(o&&e!==undefined){throw new Error("framework delegate is missing")}return null};const d=()=>{const{delegate:e}=i();if(e&&n.el!==undefined){e.removeViewFromDom(n.el.parentElement,n.el)}};return{attachViewToDom:r,removeViewFromDom:d}};const H=()=>{let n;const e=()=>{if(n){n();n=undefined}};const t=(t,o)=>{e();const i=o!==undefined?document.getElementById(o):null;if(!i){u(`A trigger element with the ID "${o}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,t);return}const s=(n,e)=>{const t=()=>{e.present()};n.addEventListener("click",t);return()=>{n.removeEventListener("click",t)}};n=s(i,t)};return{addClickListener:t,removeClickListener:e}};const K=e=>{var t;if(n===undefined)return;const o=B(n);for(let n=o.length-1;n>=0;n--){const i=o[n];const s=(t=o[n+1])!==null&&t!==void 0?t:e;if(s.hasAttribute("aria-hidden")||s.tagName!=="ION-TOAST"){i.setAttribute("aria-hidden","true")}}};const Q=()=>{if(n===undefined)return;const e=B(n);for(let n=e.length-1;n>=0;n--){const t=e[n];t.removeAttribute("aria-hidden");if(t.tagName!=="ION-TOAST"){break}}};export{F as B,U as G,_ as O,H as a,E as b,q as c,J as d,V as e,$ as f,y as g,b as h,z as i,h as j,T as k,N as l,w as p,g as s};
//# sourceMappingURL=p-eUBaTTeX.js.map
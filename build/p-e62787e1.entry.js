import{r as t,c as i,h as s,H as o}from"./p-D6EONAzC.js";const n="div,p{color:var(--ion-color-danger)}";const r=class{constructor(s){t(this,s);this.validationCompleted=i(this,"validationCompleted",7);this.requiredMismatch=new Set;this.datatypeMismatch=new Set;this.dataIsNotValid={};this.data=undefined;this.expectedKeys=undefined}componentWillLoad(){this.validateData()}validateData(){this.requiredMismatch.clear();this.datatypeMismatch.clear();this.dataIsNotValid={};this.expectedKeys.forEach((t=>{this.data.forEach((i=>{var s;if(t.required&&i[t.name]===undefined){this.requiredMismatch.add(t.name)}for(const o in i){if(Object.prototype.hasOwnProperty.call(i,o)){const n=i[o];if(t.name===o){if(t.datatype&&((s=n===null||n===void 0?void 0:n.datatype)!==null&&s!==void 0?s:"string")!==t.datatype){this.datatypeMismatch.add(t.name)}if((t===null||t===void 0?void 0:t.customValidator)&&typeof t.customValidator==="function"){const i=t.customValidator(n);if(i)this.dataIsNotValid[t.name]=i}}}}}))}));const t=this.requiredMismatch.size===0&&this.datatypeMismatch.size===0&&Object.keys(this.dataIsNotValid).length===0;this.validationCompleted.emit(t)}render(){return s(o,null,Array.from(this.requiredMismatch).map((t=>s("p",null,"The variable ?",t," must not return empty values. Currently it is either not bound or it returns empty records."))),Array.from(this.datatypeMismatch).map((t=>{var i;return s("p",null,"The variable ?",t," must be of datatype ",(i=this.expectedKeys.find((i=>i.name===t)))===null||i===void 0?void 0:i.datatype,". Some or all records do not match that data type.")})),Object.keys(this.dataIsNotValid).map((t=>s("div",null,"Validation errors for variable ?",t,":",s("ul",null,Array.from(this.dataIsNotValid[t]).map((t=>s("li",null,t))))))))}};r.style=n;export{r as geov_yasgui_data_validation};
//# sourceMappingURL=p-e62787e1.entry.js.map
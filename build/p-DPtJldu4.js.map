{"version":3,"file":"p-DPtJldu4.js","sources":["node_modules/@ionic/core/dist/collection/utils/hardware-back-button.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { win } from \"./browser/index\";\nimport { config } from \"../global/config\";\n/**\n * CloseWatcher is a newer API that lets\n * use detect the hardware back button event\n * in a web browser: https://caniuse.com/?search=closewatcher\n * However, not every browser supports it yet.\n *\n * This needs to be a function so that we can\n * check the config once it has been set.\n * Otherwise, this code would be evaluated the\n * moment this file is evaluated which could be\n * before the config is set.\n */\nexport const shouldUseCloseWatcher = () => config.get('experimentalCloseWatcher', false) && win !== undefined && 'CloseWatcher' in win;\n/**\n * When hardwareBackButton: false in config,\n * we need to make sure we also block the default\n * webview behavior. If we don't then it will be\n * possible for users to navigate backward while\n * an overlay is still open. Additionally, it will\n * give the appearance that the hardwareBackButton\n * config is not working as the page transition\n * will still happen.\n */\nexport const blockHardwareBackButton = () => {\n    document.addEventListener('backbutton', () => { }); // eslint-disable-line\n};\nexport const startHardwareBackButton = () => {\n    const doc = document;\n    let busy = false;\n    const backButtonCallback = () => {\n        if (busy) {\n            return;\n        }\n        let index = 0;\n        let handlers = [];\n        const ev = new CustomEvent('ionBackButton', {\n            bubbles: false,\n            detail: {\n                register(priority, handler) {\n                    handlers.push({ priority, handler, id: index++ });\n                },\n            },\n        });\n        doc.dispatchEvent(ev);\n        const executeAction = async (handlerRegister) => {\n            try {\n                if (handlerRegister === null || handlerRegister === void 0 ? void 0 : handlerRegister.handler) {\n                    const result = handlerRegister.handler(processHandlers);\n                    if (result != null) {\n                        await result;\n                    }\n                }\n            }\n            catch (e) {\n                console.error(e);\n            }\n        };\n        const processHandlers = () => {\n            if (handlers.length > 0) {\n                let selectedHandler = {\n                    priority: Number.MIN_SAFE_INTEGER,\n                    handler: () => undefined,\n                    id: -1,\n                };\n                handlers.forEach((handler) => {\n                    if (handler.priority >= selectedHandler.priority) {\n                        selectedHandler = handler;\n                    }\n                });\n                busy = true;\n                handlers = handlers.filter((handler) => handler.id !== selectedHandler.id);\n                executeAction(selectedHandler).then(() => (busy = false));\n            }\n        };\n        processHandlers();\n    };\n    /**\n     * If the CloseWatcher is defined then\n     * we don't want to also listen for the native\n     * backbutton event otherwise we may get duplicate\n     * events firing.\n     */\n    if (shouldUseCloseWatcher()) {\n        let watcher;\n        const configureWatcher = () => {\n            watcher === null || watcher === void 0 ? void 0 : watcher.destroy();\n            watcher = new win.CloseWatcher();\n            /**\n             * Once a close request happens\n             * the watcher gets destroyed.\n             * As a result, we need to re-configure\n             * the watcher so we can respond to other\n             * close requests.\n             */\n            watcher.onclose = () => {\n                backButtonCallback();\n                configureWatcher();\n            };\n        };\n        configureWatcher();\n    }\n    else {\n        doc.addEventListener('backbutton', backButtonCallback);\n    }\n};\nexport const OVERLAY_BACK_BUTTON_PRIORITY = 100;\nexport const MENU_BACK_BUTTON_PRIORITY = 99; // 1 less than overlay priority since menu is displayed behind overlays\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}
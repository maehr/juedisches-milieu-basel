import{r as t,c as e,h as i,H as r,g as n}from"./p-8Q-8j7RM.js";import{r as s,g as o}from"./p-BGUp-1Wb.js";import{h as a,a as c,b as l}from"./p-ofaUly0p.js";import{a as h,g as d}from"./p-CyLexh8P.js";import{c as p}from"./p-DiVJyqlX.js";import"./p-D2NxOvQ8.js";import"./p-ZjP4CjeZ.js";const u=":host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0px;padding-bottom:0px;height:200px;outline:none;font-size:22px;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none;text-align:center}:host::-webkit-scrollbar{display:none}:host .picker-item{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden;scroll-snap-align:center}:host .picker-item-empty,:host .picker-item[disabled]{cursor:default}:host .picker-item-empty,:host(:not([disabled])) .picker-item[disabled]{scroll-snap-align:none}:host([disabled]){overflow-y:hidden}:host .picker-item[disabled]{opacity:0.4}:host(.picker-column-active) .picker-item.picker-item-active{color:var(--ion-color-base)}@media (any-hover: hover){:host(:focus){outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}";const f=":host{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:0px;padding-bottom:0px;height:200px;outline:none;font-size:22px;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none;text-align:center}:host::-webkit-scrollbar{display:none}:host .picker-item{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden;scroll-snap-align:center}:host .picker-item-empty,:host .picker-item[disabled]{cursor:default}:host .picker-item-empty,:host(:not([disabled])) .picker-item[disabled]{scroll-snap-align:none}:host([disabled]){overflow-y:hidden}:host .picker-item[disabled]{opacity:0.4}:host(.picker-column-active) .picker-item.picker-item-active{color:var(--ion-color-base)}@media (any-hover: hover){:host(:focus){outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}:host .picker-item-active{color:var(--ion-color-base)}";const g=class{constructor(i){t(this,i);this.ionChange=e(this,"ionChange",7);this.isScrolling=false;this.isColumnVisible=false;this.canExitInputMode=true;this.centerPickerItemInView=(t,e=true,i=true)=>{const{el:r,isColumnVisible:n}=this;if(n){const n=t.offsetTop-3*t.clientHeight+t.clientHeight/2;if(r.scrollTop!==n){this.canExitInputMode=i;r.scroll({top:n,left:0,behavior:e?"smooth":undefined})}}};this.setPickerItemActiveState=(t,e)=>{if(e){t.classList.add(b);t.part.add(m)}else{t.classList.remove(b);t.part.remove(m)}};this.inputModeChange=t=>{if(!this.numericInput){return}const{useInputMode:e,inputModeColumn:i}=t.detail;const r=i===undefined||i===this.el;if(!e||!r){this.setInputModeActive(false);return}this.setInputModeActive(true)};this.setInputModeActive=t=>{if(this.isScrolling){this.scrollEndCallback=()=>{this.isActive=t};return}this.isActive=t};this.initializeScrollListener=()=>{const t=h("ios");const{el:e}=this;let i;let r=this.activeItem;const n=()=>{s((()=>{if(i){clearTimeout(i);i=undefined}if(!this.isScrolling){t&&a();this.isScrolling=true}const n=e.getBoundingClientRect();const s=n.x+n.width/2;const o=n.y+n.height/2;const h=e.shadowRoot.elementFromPoint(s,o);if(r!==null){this.setPickerItemActiveState(r,false)}if(h===null||h.disabled){return}if(h!==r){t&&c();if(this.canExitInputMode){this.exitInputMode()}}r=h;this.setPickerItemActiveState(h,true);i=setTimeout((()=>{this.isScrolling=false;t&&l();const{scrollEndCallback:e}=this;if(e){e();this.scrollEndCallback=undefined}this.canExitInputMode=true;const i=h.getAttribute("data-index");if(i===null){return}const r=parseInt(i,10);const n=this.items[r];if(n.value!==this.value){this.setValue(n.value)}}),250)}))};s((()=>{e.addEventListener("scroll",n);this.destroyScrollListener=()=>{e.removeEventListener("scroll",n)}}))};this.exitInputMode=()=>{const{parentEl:t}=this;if(t==null)return;t.exitInputMode();this.el.classList.remove("picker-column-active")};this.isActive=false;this.disabled=false;this.items=[];this.value=undefined;this.color="primary";this.numericInput=false}valueChange(){if(this.isColumnVisible){this.scrollActiveItemIntoView()}}componentWillLoad(){const t=t=>{const e=t[t.length-1];if(e.isIntersecting){const{activeItem:t,el:e}=this;this.isColumnVisible=true;const i=o(e).querySelector(`.${b}`);if(i){this.setPickerItemActiveState(i,false)}this.scrollActiveItemIntoView();if(t){this.setPickerItemActiveState(t,true)}this.initializeScrollListener()}else{this.isColumnVisible=false;if(this.destroyScrollListener){this.destroyScrollListener();this.destroyScrollListener=undefined}}};new IntersectionObserver(t,{threshold:.001}).observe(this.el);const e=this.parentEl=this.el.closest("ion-picker-internal");if(e!==null){e.addEventListener("ionInputModeChange",(t=>this.inputModeChange(t)))}}componentDidRender(){var t;const{activeItem:e,items:i,isColumnVisible:r,value:n}=this;if(r){if(e){this.scrollActiveItemIntoView()}else if(((t=i[0])===null||t===void 0?void 0:t.value)!==n){this.setValue(i[0].value)}}}async scrollActiveItemIntoView(){const t=this.activeItem;if(t){this.centerPickerItemInView(t,false,false)}}async setValue(t){const{items:e}=this;this.value=t;const i=e.find((e=>e.value===t&&e.disabled!==true));if(i){this.ionChange.emit(i)}}get activeItem(){const t=`.picker-item[data-value="${this.value}"]${this.disabled?"":":not([disabled])"}`;return o(this.el).querySelector(t)}render(){const{items:t,color:e,disabled:n,isActive:s,numericInput:o}=this;const a=d(this);return i(r,{key:"42a034f2533d30d19f96a121eb74d5f757e1c684",exportparts:`${k}, ${m}`,disabled:n,tabindex:n?null:0,class:p(e,{[a]:true,["picker-column-active"]:s,["picker-column-numeric-input"]:o})},i("div",{key:"85efccb40c87d473c06026b8041d57b40d2369c3",class:"picker-item picker-item-empty","aria-hidden":"true"}," "),i("div",{key:"9fae4dd6697f23acba18c218ba250ea77954b18d",class:"picker-item picker-item-empty","aria-hidden":"true"}," "),i("div",{key:"f117afeb204a4f6bb34a1cd0e1b786fa479d8b32",class:"picker-item picker-item-empty","aria-hidden":"true"}," "),t.map(((t,e)=>{const r=n||t.disabled||false;return i("button",{tabindex:"-1",class:{"picker-item":true},"data-value":t.value,"data-index":e,onClick:t=>{this.centerPickerItemInView(t.target,true)},disabled:r,part:k},t.text)})),i("div",{key:"28aa37f9ce90e88b9c3a5b2c399e3066e9f339e1",class:"picker-item picker-item-empty","aria-hidden":"true"}," "),i("div",{key:"ef4ae6bee2b17918f0c2aba9d5c720c1d95987e4",class:"picker-item picker-item-empty","aria-hidden":"true"}," "),i("div",{key:"564967bc8e42a9018163850da3a967a933b3de7b",class:"picker-item picker-item-empty","aria-hidden":"true"}," "))}get el(){return n(this)}static get watchers(){return{value:["valueChange"]}}};const b="picker-item-active";const k="wheel-item";const m="active";g.style={ios:u,md:f};const v=":host{display:flex;position:relative;align-items:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{top:0;height:83px}@supports (inset-inline-start: 0){:host .picker-before{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host .picker-before{left:0}:host-context([dir=rtl]) .picker-before{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)) .picker-before{left:unset;right:unset;right:0}}}:host .picker-after{top:116px;height:84px}@supports (inset-inline-start: 0){:host .picker-after{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host .picker-after{left:0}:host-context([dir=rtl]) .picker-after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)) .picker-after{left:unset;right:unset;right:0}}}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;transform:translateY(-50%);background:var(--wheel-highlight-background);z-index:-1}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:linear-gradient(to bottom, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8) 100%)}:host .picker-after{background:linear-gradient(to top, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0.8) 100%)}:host .picker-highlight{background:var(--wheel-highlight-background, var(--ion-color-step-150, #eeeeef))}";const x=":host{display:flex;position:relative;align-items:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{top:0;height:83px}@supports (inset-inline-start: 0){:host .picker-before{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host .picker-before{left:0}:host-context([dir=rtl]) .picker-before{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)) .picker-before{left:unset;right:unset;right:0}}}:host .picker-after{top:116px;height:84px}@supports (inset-inline-start: 0){:host .picker-after{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host .picker-after{left:0}:host-context([dir=rtl]) .picker-after{left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)) .picker-after{left:unset;right:unset;right:0}}}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;transform:translateY(-50%);background:var(--wheel-highlight-background);z-index:-1}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:linear-gradient(to bottom, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 20%, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0) 90%)}:host .picker-after{background:linear-gradient(to top, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 1) 30%, rgba(var(--wheel-fade-background-rgb, var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255))), 0) 90%)}";const y=class{constructor(i){t(this,i);this.ionInputModeChange=e(this,"ionInputModeChange",7);this.useInputMode=false;this.isInHighlightBounds=t=>{const{highlightEl:e}=this;if(!e){return false}const i=e.getBoundingClientRect();const r=t.clientX<i.left||t.clientX>i.right;const n=t.clientY<i.top||t.clientY>i.bottom;if(r||n){return false}return true};this.onFocusOut=t=>{const{relatedTarget:e}=t;if(!e||e.tagName!=="ION-PICKER-COLUMN-INTERNAL"&&e!==this.inputEl){this.exitInputMode()}};this.onFocusIn=t=>{const{target:e}=t;if(e.tagName!=="ION-PICKER-COLUMN-INTERNAL"){return}if(!this.actionOnClick){const t=e;const i=t.numericInput;if(i){this.enterInputMode(t,false)}else{this.exitInputMode()}}};this.onClick=()=>{const{actionOnClick:t}=this;if(t){t();this.actionOnClick=undefined}};this.onPointerDown=t=>{const{useInputMode:e,inputModeColumn:i,el:r}=this;if(this.isInHighlightBounds(t)){if(e){if(t.target.tagName==="ION-PICKER-COLUMN-INTERNAL"){if(i&&i===t.target){this.actionOnClick=()=>{this.enterInputMode()}}else{this.actionOnClick=()=>{this.enterInputMode(t.target)}}}else{this.actionOnClick=()=>{this.exitInputMode()}}}else{const e=r.querySelectorAll("ion-picker-column-internal.picker-column-numeric-input");const i=e.length===1?t.target:undefined;this.actionOnClick=()=>{this.enterInputMode(i)}}return}this.actionOnClick=()=>{this.exitInputMode()}};this.enterInputMode=(t,e=true)=>{const{inputEl:i,el:r}=this;if(!i){return}const n=r.querySelector("ion-picker-column-internal.picker-column-numeric-input");if(!n){return}this.useInputMode=true;this.inputModeColumn=t;if(e){if(this.destroyKeypressListener){this.destroyKeypressListener();this.destroyKeypressListener=undefined}i.focus()}else{r.addEventListener("keypress",this.onKeyPress);this.destroyKeypressListener=()=>{r.removeEventListener("keypress",this.onKeyPress)}}this.emitInputModeChange()};this.onKeyPress=t=>{const{inputEl:e}=this;if(!e){return}const i=parseInt(t.key,10);if(!Number.isNaN(i)){e.value+=t.key;this.onInputChange()}};this.selectSingleColumn=()=>{const{inputEl:t,inputModeColumn:e,singleColumnSearchTimeout:i}=this;if(!t||!e){return}const r=e.items.filter((t=>t.disabled!==true));if(i){clearTimeout(i)}this.singleColumnSearchTimeout=setTimeout((()=>{t.value="";this.singleColumnSearchTimeout=undefined}),1e3);if(t.value.length>=3){const e=t.value.length-2;const i=t.value.substring(e);t.value=i;this.selectSingleColumn();return}const n=r.find((({text:e})=>{const i=e.replace(/^0+(?=[1-9])|0+(?=0$)/,"");return i===t.value}));if(n){e.setValue(n.value);return}if(t.value.length===2){const e=t.value.substring(t.value.length-1);t.value=e;this.selectSingleColumn()}};this.searchColumn=(t,e,i="start")=>{const r=i==="start"?/^0+/:/0$/;const n=t.items.find((({text:t,disabled:i})=>i!==true&&t.replace(r,"")===e));if(n){t.setValue(n.value)}};this.selectMultiColumn=()=>{const{inputEl:t,el:e}=this;if(!t){return}const i=Array.from(e.querySelectorAll("ion-picker-column-internal")).filter((t=>t.numericInput));const r=i[0];const n=i[1];let s=t.value;let o;switch(s.length){case 1:this.searchColumn(r,s);break;case 2:const e=t.value.substring(0,1);s=e==="0"||e==="1"?t.value:e;this.searchColumn(r,s);if(s.length===1){o=t.value.substring(t.value.length-1);this.searchColumn(n,o,"end")}break;case 3:const i=t.value.substring(0,1);s=i==="0"||i==="1"?t.value.substring(0,2):i;this.searchColumn(r,s);o=s.length===1?t.value.substring(1):t.value.substring(2);this.searchColumn(n,o,"end");break;case 4:const a=t.value.substring(0,1);s=a==="0"||a==="1"?t.value.substring(0,2):a;this.searchColumn(r,s);const c=s.length===1?t.value.substring(1,t.value.length):t.value.substring(2,t.value.length);this.searchColumn(n,c,"end");break;default:const l=t.value.length-4;const h=t.value.substring(l);t.value=h;this.selectMultiColumn();break}};this.onInputChange=()=>{const{useInputMode:t,inputEl:e,inputModeColumn:i}=this;if(!t||!e){return}if(i){this.selectSingleColumn()}else{this.selectMultiColumn()}};this.emitInputModeChange=()=>{const{useInputMode:t,inputModeColumn:e}=this;this.ionInputModeChange.emit({useInputMode:t,inputModeColumn:e})}}preventTouchStartPropagation(t){t.stopPropagation()}componentWillLoad(){o(this.el).addEventListener("focusin",this.onFocusIn);o(this.el).addEventListener("focusout",this.onFocusOut)}async exitInputMode(){const{inputEl:t,useInputMode:e}=this;if(!e||!t){return}this.useInputMode=false;this.inputModeColumn=undefined;t.blur();t.value="";if(this.destroyKeypressListener){this.destroyKeypressListener();this.destroyKeypressListener=undefined}this.emitInputModeChange()}render(){return i(r,{key:"01cbd466787242ad070b01909714089570b4d67f",onPointerDown:t=>this.onPointerDown(t),onClick:()=>this.onClick()},i("input",{key:"7ff8c0a74c107610a6f0dd9fbc2fc7a4a6dc2468","aria-hidden":"true",tabindex:-1,inputmode:"numeric",type:"number",onKeyDown:t=>{var e;if(t.key==="Enter"){(e=this.inputEl)===null||e===void 0?void 0:e.blur()}},ref:t=>this.inputEl=t,onInput:()=>this.onInputChange(),onBlur:()=>this.exitInputMode()}),i("div",{key:"4700c9d877f54ae8f3fb173122193c27637f70a4",class:"picker-before"}),i("div",{key:"7ceae834b15d559f3819ec2116f83669cf6665fc",class:"picker-after"}),i("div",{key:"2d3bfda76279c2ee14edc067c53651be23b8b525",class:"picker-highlight",ref:t=>this.highlightEl=t}),i("slot",{key:"4797def7a3882a8a911ad47949b76f58a9f448d1"}))}get el(){return n(this)}};y.style={ios:v,md:x};export{g as ion_picker_column_internal,y as ion_picker_internal};
//# sourceMappingURL=p-5c12d8c3.entry.js.map
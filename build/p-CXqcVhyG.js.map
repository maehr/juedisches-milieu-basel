{"version":3,"file":"p-CXqcVhyG.js","sources":["node_modules/@ionic/core/dist/collection/components/refresher/refresher.utils.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { writeTask } from \"@stencil/core\";\nimport { createAnimation } from \"../../utils/animation/animation\";\nimport { clamp, componentOnReady, transitionEndAsync } from \"../../utils/helpers\";\nexport const getRefresherAnimationType = (contentEl) => {\n    const previousSibling = contentEl.previousElementSibling;\n    const hasHeader = previousSibling !== null && previousSibling.tagName === 'ION-HEADER';\n    return hasHeader ? 'translate' : 'scale';\n};\nexport const createPullingAnimation = (type, pullingSpinner, refresherEl) => {\n    return type === 'scale'\n        ? createScaleAnimation(pullingSpinner, refresherEl)\n        : createTranslateAnimation(pullingSpinner, refresherEl);\n};\nconst createBaseAnimation = (pullingRefresherIcon) => {\n    const spinner = pullingRefresherIcon.querySelector('ion-spinner');\n    const circle = spinner.shadowRoot.querySelector('circle');\n    const spinnerArrowContainer = pullingRefresherIcon.querySelector('.spinner-arrow-container');\n    const arrowContainer = pullingRefresherIcon.querySelector('.arrow-container');\n    const arrow = arrowContainer ? arrowContainer.querySelector('ion-icon') : null;\n    const baseAnimation = createAnimation().duration(1000).easing('ease-out');\n    const spinnerArrowContainerAnimation = createAnimation()\n        .addElement(spinnerArrowContainer)\n        .keyframes([\n        { offset: 0, opacity: '0.3' },\n        { offset: 0.45, opacity: '0.3' },\n        { offset: 0.55, opacity: '1' },\n        { offset: 1, opacity: '1' },\n    ]);\n    const circleInnerAnimation = createAnimation()\n        .addElement(circle)\n        .keyframes([\n        { offset: 0, strokeDasharray: '1px, 200px' },\n        { offset: 0.2, strokeDasharray: '1px, 200px' },\n        { offset: 0.55, strokeDasharray: '100px, 200px' },\n        { offset: 1, strokeDasharray: '100px, 200px' },\n    ]);\n    const circleOuterAnimation = createAnimation()\n        .addElement(spinner)\n        .keyframes([\n        { offset: 0, transform: 'rotate(-90deg)' },\n        { offset: 1, transform: 'rotate(210deg)' },\n    ]);\n    /**\n     * Only add arrow animation if present\n     * this allows users to customize the spinners\n     * without errors being thrown\n     */\n    if (arrowContainer && arrow) {\n        const arrowContainerAnimation = createAnimation()\n            .addElement(arrowContainer)\n            .keyframes([\n            { offset: 0, transform: 'rotate(0deg)' },\n            { offset: 0.3, transform: 'rotate(0deg)' },\n            { offset: 0.55, transform: 'rotate(280deg)' },\n            { offset: 1, transform: 'rotate(400deg)' },\n        ]);\n        const arrowAnimation = createAnimation()\n            .addElement(arrow)\n            .keyframes([\n            { offset: 0, transform: 'translateX(2px) scale(0)' },\n            { offset: 0.3, transform: 'translateX(2px) scale(0)' },\n            { offset: 0.55, transform: 'translateX(-1.5px) scale(1)' },\n            { offset: 1, transform: 'translateX(-1.5px) scale(1)' },\n        ]);\n        baseAnimation.addAnimation([arrowContainerAnimation, arrowAnimation]);\n    }\n    return baseAnimation.addAnimation([spinnerArrowContainerAnimation, circleInnerAnimation, circleOuterAnimation]);\n};\nconst createScaleAnimation = (pullingRefresherIcon, refresherEl) => {\n    /**\n     * Do not take the height of the refresher icon\n     * because at this point the DOM has not updated,\n     * so the refresher icon is still hidden with\n     * display: none.\n     * The `ion-refresher` container height\n     * is roughly the amount we need to offset\n     * the icon by when pulling down.\n     */\n    const height = refresherEl.clientHeight;\n    const spinnerAnimation = createAnimation()\n        .addElement(pullingRefresherIcon)\n        .keyframes([\n        { offset: 0, transform: `scale(0) translateY(-${height}px)` },\n        { offset: 1, transform: 'scale(1) translateY(100px)' },\n    ]);\n    return createBaseAnimation(pullingRefresherIcon).addAnimation([spinnerAnimation]);\n};\nconst createTranslateAnimation = (pullingRefresherIcon, refresherEl) => {\n    /**\n     * Do not take the height of the refresher icon\n     * because at this point the DOM has not updated,\n     * so the refresher icon is still hidden with\n     * display: none.\n     * The `ion-refresher` container height\n     * is roughly the amount we need to offset\n     * the icon by when pulling down.\n     */\n    const height = refresherEl.clientHeight;\n    const spinnerAnimation = createAnimation()\n        .addElement(pullingRefresherIcon)\n        .keyframes([\n        { offset: 0, transform: `translateY(-${height}px)` },\n        { offset: 1, transform: 'translateY(100px)' },\n    ]);\n    return createBaseAnimation(pullingRefresherIcon).addAnimation([spinnerAnimation]);\n};\nexport const createSnapBackAnimation = (pullingRefresherIcon) => {\n    return createAnimation()\n        .duration(125)\n        .addElement(pullingRefresherIcon)\n        .fromTo('transform', 'translateY(var(--ion-pulling-refresher-translate, 100px))', 'translateY(0px)');\n};\n// iOS Native Refresher\n// -----------------------------\nexport const setSpinnerOpacity = (spinner, opacity) => {\n    spinner.style.setProperty('opacity', opacity.toString());\n};\nexport const handleScrollWhilePulling = (ticks, numTicks, pullAmount) => {\n    const max = 1;\n    writeTask(() => {\n        ticks.forEach((el, i) => {\n            /**\n             * Compute the opacity of each tick\n             * mark as a percentage of the pullAmount\n             * offset by max / numTicks so\n             * the tick marks are shown staggered.\n             */\n            const min = i * (max / numTicks);\n            const range = max - min;\n            const start = pullAmount - min;\n            const progression = clamp(0, start / range, 1);\n            el.style.setProperty('opacity', progression.toString());\n        });\n    });\n};\nexport const handleScrollWhileRefreshing = (spinner, lastVelocityY) => {\n    writeTask(() => {\n        // If user pulls down quickly, the spinner should spin faster\n        spinner.style.setProperty('--refreshing-rotation-duration', lastVelocityY >= 1.0 ? '0.5s' : '2s');\n        spinner.style.setProperty('opacity', '1');\n    });\n};\nexport const translateElement = (el, value, duration = 200) => {\n    if (!el) {\n        return Promise.resolve();\n    }\n    const trans = transitionEndAsync(el, duration);\n    writeTask(() => {\n        el.style.setProperty('transition', `${duration}ms all ease-out`);\n        if (value === undefined) {\n            el.style.removeProperty('transform');\n        }\n        else {\n            el.style.setProperty('transform', `translate3d(0px, ${value}, 0px)`);\n        }\n    });\n    return trans;\n};\n// Utils\n// -----------------------------\n/**\n * In order to use the native iOS refresher the device must support rubber band scrolling.\n * As part of this, we need to exclude Desktop Safari because it has a slightly different rubber band effect that is not compatible with the native refresher in Ionic.\n *\n * We also need to be careful not to include devices that spoof their user agent.\n * For example, when using iOS emulation in Chrome the user agent will be spoofed such that\n * navigator.maxTouchPointer > 0. To work around this,\n * we check to see if the apple-pay-logo is supported as a named image which is only\n * true on Apple devices.\n *\n * We previously checked referencEl.style.webkitOverflowScrolling to explicitly check\n * for rubber band support. However, this property was removed on iPadOS and it's possible\n * that this will be removed on iOS in the future too.\n *\n */\nexport const supportsRubberBandScrolling = () => {\n    return navigator.maxTouchPoints > 0 && CSS.supports('background: -webkit-named-image(apple-pay-logo-black)');\n};\nexport const shouldUseNativeRefresher = async (referenceEl, mode) => {\n    const refresherContent = referenceEl.querySelector('ion-refresher-content');\n    if (!refresherContent) {\n        return Promise.resolve(false);\n    }\n    await new Promise((resolve) => componentOnReady(refresherContent, resolve));\n    const pullingSpinner = referenceEl.querySelector('ion-refresher-content .refresher-pulling ion-spinner');\n    const refreshingSpinner = referenceEl.querySelector('ion-refresher-content .refresher-refreshing ion-spinner');\n    return (pullingSpinner !== null &&\n        refreshingSpinner !== null &&\n        ((mode === 'ios' && supportsRubberBandScrolling()) || mode === 'md'));\n};\n"],"names":[],"mappings":"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","x_google_ignoreList":[0]}
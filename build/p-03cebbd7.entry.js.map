{"version":3,"names":["pageIntroCss","PageIntro","constructor","hostRef","this","disconnected","playing","componentDidLoad","state","playedIntro","skipIntro","disconnectedCallback","playIntro","flash1","stop","flash2","flash3","play","navigateToPuzzle","routerProvider","ionRouterElement","push","animationBuilderFadePages","render","h","Fragment","key","class","id","fill","size","onClick","slot","name","ref","e","createShowHideAnimation","skipBtn","createShowAnimation","el","createAnimation","addElement","duration","keyframes","offset","opacity","display","beforeStyles","afterStyles","transform"],"sources":["src/components/page-intro/page-intro.css?tag=page-intro","src/components/page-intro/page-intro.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\n.overflow-y-hidden {\n  --overflow: hidden;\n}\n\n.container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.flash-container {\n  display: none;\n  transform: scale(0.01);\n  flex-grow: 1;\n  position: relative;\n  justify-content: center;\n  align-items: center;\n  font-size: 200px;\n  white-space: nowrap;\n}\n\n.skip-intro-btn {\n  position: relative;\n  display: none;\n}\n\n.go-btn {\n  flex-grow: 1;\n  position: relative;\n  justify-content: center;\n  align-items: center;\n}\n\n.container.playing .skip-intro-btn {\n  display: block;\n}\n\n.container.initial .go-btn {\n  display: flex;\n}\n\n.container.playing .go-btn,\n.container.ended .go-btn {\n  display: none;\n}\n","import { Animation, createAnimation } from '@ionic/core';\nimport { Component, Fragment, h, State } from '@stencil/core';\nimport { animationBuilderFadePages } from '../../global/page-animation';\nimport routerProvider from '../../global/router-provider';\nimport { state } from '../../global/store';\n\n@Component({\n  tag: 'page-intro',\n  styleUrl: 'page-intro.css',\n  // shadow: true,\n})\nexport class PageIntro {\n  skipBtn: HTMLIonButtonElement;\n\n  flash1: Animation;\n  flash2: Animation;\n  flash3: Animation;\n\n  disconnected = false;\n\n  @State() playing: 'initial' | 'playing' | 'ended' = 'initial';\n\n  async componentDidLoad() {\n    if (state.playedIntro) this.skipIntro();\n  }\n  disconnectedCallback() {\n    this.playing = 'initial';\n    this.disconnected = true;\n  }\n  private async playIntro() {\n    this.playing = 'playing';\n    this.flash1.stop();\n    this.flash2.stop();\n    this.flash3.stop();\n    await this.flash1.play();\n    await this.flash2.play();\n    await this.flash3.play();\n    this.playing = 'ended';\n    state.playedIntro = true;\n    this.navigateToPuzzle();\n  }\n\n  private skipIntro() {\n    this.flash1.stop();\n    this.flash2.stop();\n    this.flash3.stop();\n    this.playing = 'ended';\n    state.playedIntro = true;\n    this.navigateToPuzzle();\n  }\n\n  private navigateToPuzzle() {\n    if (!this.disconnected) routerProvider.ionRouterElement.push('/puzzle', 'forward', animationBuilderFadePages);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ion-content class=\"ion-padding overflow-y-hidden\" id=\"main-menu\">\n          <div class={`container ${this.playing}`}>\n            <div class=\"go-btn\">\n              <ion-button fill=\"clear\" size=\"large\" onClick={() => this.playIntro()}>\n                Los geht's\n                <ion-icon slot=\"end\" name=\"chevron-forward-outline\"></ion-icon>\n              </ion-button>\n            </div>\n            <Fragment>\n              <div class=\"flash-container hidden\" ref={e => (this.flash1 = this.createShowHideAnimation(e))}>\n                Das jüdische Basel\n              </div>\n              <div class=\"flash-container hidden\" ref={e => (this.flash2 = this.createShowHideAnimation(e))}>\n                1850 bis 1914\n              </div>\n              <div class=\"flash-container hidden\" ref={e => (this.flash3 = this.createShowHideAnimation(e))}>\n                in zwölf Teilen\n              </div>\n              <ion-button fill=\"clear\" class=\"skip-intro-btn\" ref={e => (this.skipBtn = e)} onClick={() => this.skipIntro()}>\n                Intro überspringen\n                <ion-icon slot=\"end\" name=\"chevron-forward-outline\"></ion-icon>\n              </ion-button>\n            </Fragment>\n          </div>\n        </ion-content>\n      </Fragment>\n    );\n  }\n\n  createShowAnimation(el: Element): Animation {\n    return createAnimation('show')\n      .addElement(el)\n      .duration(1500)\n      .keyframes([\n        { offset: 0, opacity: '0', display: 'block' },\n        { offset: 1, opacity: '1', display: 'block' },\n      ]);\n  }\n  createShowHideAnimation(el: Element): Animation {\n    return createAnimation('show-hide')\n      .addElement(el)\n      .duration(2500)\n      .beforeStyles({ display: 'flex' })\n      .afterStyles({ display: 'none' })\n      .keyframes([\n        { offset: 0, opacity: '0' },\n        { offset: 0.2, opacity: '1' },\n        { offset: 0.4, opacity: '1' },\n        { offset: 0.8, opacity: '0', transform: 'scale(1)' },\n        { offset: 1, opacity: '0', transform: 'scale(1)' },\n      ]);\n  }\n}\n"],"mappings":"qQAAA,MAAMA,EAAe,klB,MCWRC,EAAS,MALtB,WAAAC,CAAAC,G,UAYEC,KAAYC,aAAG,MAEND,KAAOE,QAAoC,SA0FrD,CAxFC,sBAAMC,GACJ,GAAIC,EAAMC,YAAaL,KAAKM,W,CAE9B,oBAAAC,GACEP,KAAKE,QAAU,UACfF,KAAKC,aAAe,I,CAEd,eAAMO,GACZR,KAAKE,QAAU,UACfF,KAAKS,OAAOC,OACZV,KAAKW,OAAOD,OACZV,KAAKY,OAAOF,aACNV,KAAKS,OAAOI,aACZb,KAAKW,OAAOE,aACZb,KAAKY,OAAOC,OAClBb,KAAKE,QAAU,QACfE,EAAMC,YAAc,KACpBL,KAAKc,kB,CAGC,SAAAR,GACNN,KAAKS,OAAOC,OACZV,KAAKW,OAAOD,OACZV,KAAKY,OAAOF,OACZV,KAAKE,QAAU,QACfE,EAAMC,YAAc,KACpBL,KAAKc,kB,CAGC,gBAAAA,GACN,IAAKd,KAAKC,aAAcc,EAAeC,iBAAiBC,KAAK,UAAW,UAAWC,E,CAGrF,MAAAC,GACE,OACEC,EAACC,EAAQ,CAAAC,IAAA,4CACPF,EAAA,eAAAE,IAAA,2CAAaC,MAAM,gCAAgCC,GAAG,aACpDJ,EAAA,OAAAE,IAAA,2CAAKC,MAAO,aAAavB,KAAKE,WAC5BkB,EAAK,OAAAE,IAAA,2CAAAC,MAAM,UACTH,EAAA,cAAAE,IAAA,2CAAYG,KAAK,QAAQC,KAAK,QAAQC,QAAS,IAAM3B,KAAKQ,aAAW,aAEnEY,EAAU,YAAAE,IAAA,2CAAAM,KAAK,MAAMC,KAAK,8BAG9BT,EAACC,EAAQ,CAAAC,IAAA,4CACPF,EAAK,OAAAE,IAAA,2CAAAC,MAAM,yBAAyBO,IAAKC,GAAM/B,KAAKS,OAAST,KAAKgC,wBAAwBD,IAEpF,sBACNX,EAAK,OAAAE,IAAA,2CAAAC,MAAM,yBAAyBO,IAAKC,GAAM/B,KAAKW,OAASX,KAAKgC,wBAAwBD,IAEpF,iBACNX,EAAK,OAAAE,IAAA,2CAAAC,MAAM,yBAAyBO,IAAKC,GAAM/B,KAAKY,OAASZ,KAAKgC,wBAAwBD,IAEpF,mBACNX,EAAA,cAAAE,IAAA,2CAAYG,KAAK,QAAQF,MAAM,iBAAiBO,IAAKC,GAAM/B,KAAKiC,QAAUF,EAAIJ,QAAS,IAAM3B,KAAKM,aAAW,qBAE3Gc,EAAA,YAAAE,IAAA,2CAAUM,KAAK,MAAMC,KAAK,gC,CASxC,mBAAAK,CAAoBC,GAClB,OAAOC,EAAgB,QACpBC,WAAWF,GACXG,SAAS,MACTC,UAAU,CACT,CAAEC,OAAQ,EAAGC,QAAS,IAAKC,QAAS,SACpC,CAAEF,OAAQ,EAAGC,QAAS,IAAKC,QAAS,U,CAG1C,uBAAAV,CAAwBG,GACtB,OAAOC,EAAgB,aACpBC,WAAWF,GACXG,SAAS,MACTK,aAAa,CAAED,QAAS,SACxBE,YAAY,CAAEF,QAAS,SACvBH,UAAU,CACT,CAAEC,OAAQ,EAAGC,QAAS,KACtB,CAAED,OAAQ,GAAKC,QAAS,KACxB,CAAED,OAAQ,GAAKC,QAAS,KACxB,CAAED,OAAQ,GAAKC,QAAS,IAAKI,UAAW,YACxC,CAAEL,OAAQ,EAAGC,QAAS,IAAKI,UAAW,a","ignoreList":[]}